(window.webpackJsonpapod=window.webpackJsonpapod||[]).push([[0],{12:function(e,a,t){e.exports=t(24)},19:function(e,a){},23:function(e,a,t){},24:function(e,a,t){"use strict";t.r(a);var i,n,r=t(6),s=t.n(r),o=t(10),c=t.n(o),l=t(0),u=t(1),d=t(3),h=t(2),p=t(4),m=t(11),v=(t(8),t(5)),f=t.n(v),g=(t(20),"UA-91390132-1"),b=5e3,y=[];function w(e){var a=e.type||"event",t="v=1";t+="&tid=".concat(g),t+="&cid=".concat(n),t+="&t=".concat(a),t+="&z=".concat(1e9+Math.floor(1147483647*Math.random())),e.category&&(t+="&ec=".concat(e.category)),e.action&&(t+="&ea=".concat(e.action)),e.label&&(t+="&el=".concat(e.label)),e.page&&(t+="&dp=".concat(e.page)),y.push(t),window.clearInterval(i),i=window.setInterval(function(){y.length>0&&function(){var e=new XMLHttpRequest;e.open("POST","http://www.google-analytics.com/batch",!0),e.send(y.join("\n")),y=[],window.clearInterval(i)}()},b)}var k=function(e){n?w(e):chrome.storage.sync.get(["apodUuid"],function(a){if(a.apodUuid)n=a.apodUuid;else{var t=function(){for(var e,a="",t=0;t<32;t++)e=16*Math.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(a+="-"),a+=(12==t?4:16==t?3&e|8:e).toString(16);return a}();chrome.storage.sync.set({apodUuid:t}),n=t}w(e)})},x="Y-m-d";function D(e){return new Date(f.a.parseDate(e,x))}function O(){return f.a.formatDate(new Date,x)}var j={get today(){return O()},prettyDateFormat:function(e){return D(e).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"})},adjacentDate:function(e,a){var t=new Date(D(e).getTime());return t=new Date(t.setDate(t.getDate()+a)),f.a.formatDate(t,x)},randomDate:function(){var e=new Date(1995,5,16),a=new Date,t=new Date(e.getTime()+Math.random()*(a.getTime()-e.getTime()));return f.a.formatDate(t,x)},isToday:function(e){return D(O()).getTime()===D(e).getTime()}};function T(e){return(e="0"+e.toString()).slice(-2)}function I(e){return document.querySelector(e)}function L(e,a){var t=document.createElement("template"),i="div";return"string"===typeof a&&(i=a),t.innerHTML=a?"<".concat(i,">").concat(e,"</").concat(i,">"):e,t.content.firstElementChild}function _(e){for(;e.firstChild;)e.removeChild(e.firstChild)}for(var q={planet:["mercury","venus","mars","jupiter","saturn","uranus","neptune","pluto"],"dwarf planet":["ceres","haumea","makemake","eris"],asteroid:["alauda","aletheia","amphitrite","aurora","bamberga","camilla","cybele","daphne","davida","diotima","doris","egeria","eros","eugenia","eunomia","euphrosyne","europa","fortuna","hebe","hektor","herculina","hermione","hygiea","interamnia","iris","juno","lachesis","metis","nemesis","pallas","palma","patientia","psyche","sylvia","themis","thisbe","ursula","vesta"],moon:["adrastea","aitne","albiorix","amalthea","ananke","anthe","aoede","arche","ariel","atlas","autonoe","belinda","bianca","caliban","callirrhoe","callisto","calypso","carme","carpo","chaldene","charon","cordelia","cressida","cupid","cyllene","deimos","desdemona","despina","dione","elara","enceladus","epimetheus","erinome","erriapo","euanthe","eukelade","euporie","europa","eurydome","ferdinand","francisco","galatea","ganymede","halimede","harpalyke","hegemone","helene","helike","hermippe","himalia","hyperion","iapetus","ijiraq","io","iocaste","isonone","janus","juliet","kale","kallichore","kalyke","kiviuq","kore","laomedeia","larissa","leda","lysithea","mab","magaclite","margaret","methone","metis","mimas","miranda","mneme","mundilfari","naiad","narvi","nereid","neso","oberon","ophelia","orthosie","paaliaq","pallene","pan","pandora","pasiphae","pasithee","perdita","phobos","phoebe","polydeuces","portia","praxidike","prometheus","prospero","proteus","psamathe","puck","rhea","rosalind","sao","setebos","siarnaq","sinope","skathi","sponde","stephano","suttungr","sycorax","tarvos","taygete","telesto","tethys","thalassa","thebe","thelxinoe","themisto","thrymr","thyone","titan","titania","trinculo","triton","umbriel","ymir"],satellite:["hubble","james webb","new horizons","voyager","spitzer","cassini"],spacecraft:["apollo","saturn v","gemini","shuttle"],galaxy:["andromeda","black eye","bode's","cartwheel","cigar","cosmos redshift 7","hoag's object","large magellanic cloud","mayall's object","milky way","pinwheel","small magellanic cloud","sombrero","sunflower","tadpole","whirlpool"],constellation:["air pump","altar","andromeda","antlia","apus","aquarius","aquila","ara","archer","aries","arrow","auriga","balance","berenice's hair","big bear","big dipper","big dog","bird of paradise","bootes","bull","caelum","camelopardalis","camelopardus","cancer","canes venatici","canis major","canis minor","capricornus","carina","carpenter's level","cassiopeia","cassiopeia","centaur","centaurus","cepheus","cepheus","cephus","cetus","chameleon","chameleon","charioteer","circinus","clock","columba","coma berenices","compasses","corona australis","corona borealis","corvus","crab","crane","crow","crux","cygnus","delphinus","dolphin","dorado","dove","draco","draco","eagle","easel","equuleus","eridanus","eridanus","filly","fishes","flying fish","fornax","fox","furnace","gemini","giraffe","giraffe","goat","goldfish","graving tool","great dog","grus","hare","harp","hercules","hercules","herdsman","holder of serpent","horologium","hunting dogs","hydra","indian","indus","keel of argonauts' ship","king of ethiopia","lacerta","leo minor","leo","leo","lepus","libra","little bear","little dipper","little dog","little horse","little lion","lizard","lupus","lupus","lynx","lynx","lyra","lyre","mariner's compass","mensa","mensa","microscope","microscopium","monoceros","musca","norma","northern crown","octans","octant","ophiuchus","orion","orion","painter","pavo","peacock","pegasus","pegasus","perseus","phoenix","phoenix","pictor","pisces","piscis austrinis","piscis austrinus","porpoise","princess of ethiopia","puppis","pyxis","queen of ethiopia","ram","raven","reticulum","sagitta","sagittarius","sail","scales","scorpion","scorpius","sculptor","sculptor","sculptor's tool","scutum","sea goat","sea monster","sea serpent","serpens","serpent","serpent-bearer","sextans","sextant","shield","son of zeus","southern cross","southern crown","southern fish","southern fish","southern fly","southern triangle","stern of the argonauts","straightedge","swan","swordfish","taurus","telescopium","telescopium","the hunter","toucan","triangulum australe","triangulum","triangulum","tucana","twins","unicorn","ursa major","ursa minor","vela","virgin","virgo","volans","vulpecula","water bearer","water snake","whale","winged horse"]},C=1;C<=110;C++)q.galaxy.push("M"+C);var S=function(){function e(a,t){Object(l.a)(this,e),this.el=I(a),this.keycode=null,this.drawer=t,this.drawerIdx=this.drawer.tabs.length,this.baseView=t.el.querySelector(".apod__drawer-view"),this.drawer.tabs.push(this),this.el.addEventListener("click",this.toggle.bind(this)),document.addEventListener("keydown",this.setKeydownListener.bind(this))}return Object(u.a)(e,[{key:"setKeydownListener",value:function(e){this.keycode&&e.which===this.keycode&&this.toggle()}},{key:"openTab",value:function(){_(this.baseView),this.baseView.appendChild(this.template),this.render(),this.drawer.setCurrentTabIdx(this.drawerIdx),this.el.classList.add("is-open")}},{key:"closeTab",value:function(){this.el.classList.remove("is-open")}},{key:"toggle",value:function(){this.drawer.isOpen?this.drawer.currentTabIdx!==this.drawerIdx?(this.closeTab.call(this.drawer.tabs[this.drawer.currentTabIdx]),this.openTab()):(this.closeTab(),this.drawer.closeDrawer()):(this.openTab(),this.drawer.openDrawer())}}]),e}(),E=function(){function e(a){Object(l.a)(this,e),this.el=a,this.backgroundImg="/images/stars.png"}return Object(u.a)(e,[{key:"updateBg",value:function(e){this.backgroundImg=e||this.backgroundImg,this.render()}},{key:"toggle",value:function(e){this.updateBg(),this.el.classList.toggle("hide",!!e)}},{key:"render",value:function(){this.el.innerHTML="";var e=L('\n    <div class="load-title">\n      <div class=\'title-container\'>  \n        <h1 class="apod-name">APOD</h1>\n        <p>By The Trav</p>\n      </div>\n    </div>\n  ');this.el.appendChild(e)}}]),e}();var M=function(){function e(){Object(l.a)(this,e),this.pastDates=[],this.currentIdx=this.pastDates.length}return Object(u.a)(e,[{key:"checkDuplicateHistory",value:function(e){return-1===this.pastDates.map(function(e){return e.date}).indexOf(e.date)}},{key:"add",value:function(e){this.checkDuplicateHistory(e)&&(this.pastDates.push(e),this.currentIdx=this.pastDates.length-1)}},{key:"recall",value:function(e){if(e>0&&this.currentIdx<this.pastDates.length-1)this.currentIdx+=e;else{if(!(e<0&&this.currentIdx>0))return!1;this.currentIdx+=e}return this.pastDates[this.currentIdx]}}]),e}(),F={image:I("#apod-image"),bgImage:I("#apod-image-vertical-bg"),explanation:I(".apod__header .explanation"),title:I("#apod-title"),date:I("#apod-date"),loading:new E(I("#apod-loading")),error:I("#apod-error"),imgQuality:I("#img-quality"),showHiRes:I(".nav-buttons #show-hi-res"),clearKnowMore:function(){_(I("#know-more-tabs"))},resetElements:function(){F.image.classList.add("hide"),F.image.innerHTML="",F.bgImage.style["background-image"]="",F.explanation.classList.add("hide"),F.showHiRes.classList.add("hide"),F.loading.toggle(!1),F.clearKnowMore()}},H=F,A=function(e){function a(e,t){var i;return Object(l.a)(this,a),(i=Object(d.a)(this,Object(h.a)(a).call(this,e,t))).keycode=69,i.title="",i.date="",i.urls={hdurl:"",url:""},i.explanation="",i.template=L("\n            <div class='explanation'>\n                <h2 class='title'></h2>\n\n                <div id='apod-explanation'></div>\n\n                <div class='external-links'>\n                    <a id='apod-origin' target='_blank'>View this APOD</a>\n                    <a id='apod-hires'  target='_blank'>Hi-res</a>\n                    <a id='apod-lowres' target='_blank'>Low-res</a>\n                </div>\n            </div>\n        "),i}return Object(p.a)(a,e),Object(u.a)(a,[{key:"knowMoreKeywordListeners",value:function(){for(var e=this.drawer.tabs.slice(2),a=0;a<e.length;a++)e[a].addKeywordClickListener()}},{key:"apodSource",value:function(){if(this.date){var e=this.date.split("-");return"ap".concat(e[0].slice(-2)).concat(T(e[1])).concat(T(e[2]),".html")}}},{key:"highlightKeywords",value:function(e,a){var t=new RegExp("\\b("+e+")\\b","gi");this.explanation=this.explanation.replace(t,'<span class="keyword keyword-'.concat(a,'">$1</span>'))}},{key:"render",value:function(){var e=this.baseView.querySelector("#apod-origin"),a=this.baseView.querySelector("#apod-hires"),t=this.baseView.querySelector("#apod-lowres"),i=this.baseView.querySelector("h2.title"),n=I("#apod-explanation");_(n),I(".external-links").addEventListener("click",function(e){k({category:"Outbound Link",action:"clicked",label:e.target.id})}),e.setAttribute("href","https://apod.nasa.gov/apod/".concat(this.apodSource())),a.setAttribute("href",this.urls.hdurl),t.setAttribute("href",this.urls.url),i.textContent=this.title,n.appendChild(L(this.explanation,!0)),this.knowMoreKeywordListeners()}}]),a}(S),V=t(7),K=function(e){function a(e,t){var i;return Object(l.a)(this,a),(i=Object(d.a)(this,Object(h.a)(a).call(this,e,t))).keycode=70,i.template=L("\n            <div class='favorites'>\n                <h2>Favorite APOD's</h2>\n                <ul id='drawer-list'></ul>\n            </div>\n        "),I(".add-favorite").addEventListener("click",i.save.bind(Object(V.a)(i))),i.load(),i}return Object(p.a)(a,e),Object(u.a)(a,[{key:"load",value:function(){var e=this;chrome.storage.sync.get(["apodFavorites"],function(a){e.favorites=a.apodFavorites||{}})}},{key:"checkFavorite",value:function(){var e=Object.keys(this.favorites).indexOf(this.date)>0,a=I(".add-favorite"),t=L(e?'<span class="favorite">Favorite</span>':'<span class="not-favorite">Save</span>');_(a),a.appendChild(t)}},{key:"save",value:function(){this.favorites[this.date]?delete this.favorites[this.date]:this.favorites[this.date]={title:this.title,imgUrl:this.url},chrome.storage.sync.set({apodFavorites:this.favorites}),this.checkFavorite(),this.load(),this.el.classList.contains("is-open")&&this.render()}},{key:"render",value:function(){var e=this,a=this.baseView.querySelector("#drawer-list");_(a),0===Object.keys(this.favorites).length&&a.appendChild(L("\n                <li class='no-favorites'>\n                    <h4>You don't have any favorites yet!</h4>\n                    <h4>Click the \"Save Favorite\" button at the top right of the page!</h4>\n                </li>"));var t=function(t){var i='background-image: url("'+e.favorites[t].imgUrl+'")',n=L("<li class='favorite'>\n                    <div class='favorite__image'>\n                        <div class='favorite__image-image' style='".concat(i,"'></div>\n                    </div>\n                    <div class='favorite__title'>\n                        <p class='favorite__title-date'>").concat(j.prettyDateFormat(t),"</p>\n                        <p class='favorite__title-title'>").concat(e.favorites[t].title,"</p>\n                    </div>\n                    <div class='remove-favorite'>Remove</div>\n                </li>"));n.querySelector(".remove-favorite").addEventListener("click",function(){delete e.favorites[t],chrome.storage.sync.set({apodFavorites:e.favorites}),e.render()});var r=[".favorite__image",".favorite__title-title",".favorite__title-date"];for(var s in r)n.querySelector(r[s]).addEventListener("click",function(){e.specificDate(t)});a.appendChild(n)};for(var i in this.favorites)t(i)}}]),a}(S),R=function(){function e(a){var t=this;Object(l.a)(this,e),this.el=I(a),this.tabsEl=this.el.querySelector(".apod__drawer-tabs"),this.tabs=[],this.isOpen=!1,this.currentTabIdx=0,this.createDefaultTabs(),document.addEventListener("keydown",function(e){27===e.which&&t.isOpen&&t.closeDrawer()})}return Object(u.a)(e,[{key:"createDefaultTabs",value:function(){new A("#tab-explanation",this),new K("#tab-favorites",this)}},{key:"resetTabs",value:function(){this.closeDrawer(),this.currentTabIdx=null,this.tabs=this.tabs.slice(0,2)}},{key:"openDrawer",value:function(){this.el.classList.add("show"),this.isOpen=!0}},{key:"closeDrawer",value:function(){this.el.classList.remove("show"),this.isOpen=!1,this.currentTabIdx&&this.currentTabIdx>=0&&this.tabs[this.currentTabIdx].closeTab()}},{key:"setCurrentTabIdx",value:function(e){this.currentTabIdx=e}}]),e}(),U=function(e){function a(){var e,t;Object(l.a)(this,a);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=Object(d.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(n)))).state={errorCount:0,delayForHdLoad:3e3,history:new M,drawer:new R("#apod-drawer"),hiResOnly:!1,isImageHD:!0,addToHistory:!0,randomData:[],datePicker:f()(H.date,{minDate:"1995-6-16",maxDate:"today",onChange:function(e,a){t.specificDate(a)}})},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("h1",null,"Apod")}}]),a}(r.Component);U.propType={selection:m.string};var z=U;t(23);chrome.storage.sync.get(["apodType","hiResOnly"],function(e){var a=e.hiResOnly,t=e.apodType;console.log("hello apod"),c.a.render(s.a.createElement(z,{selection:t,resolution:a}),document.getElementById("root"))})}},[[12,1,2]]]);
//# sourceMappingURL=main.09e5f046.chunk.js.map