{"version":3,"sources":["utilities/ga.js","DateManager.js","utilities/index.js","CelestialDictionary.js","tabs/DrawerTab.js","LoadingSpinner.js","components/History.js","components/Elements.js","tabs/ExplanationTab.js","tabs/FavoritesTab.js","components/Drawer.js","components/Apod.js","index.js"],"names":["intervalFn","CLIENT_ID","GA_TRACKING_ID","analyticsSendInterval","parameters","buildParameter","event","type","param","Math","floor","random","category","action","label","page","push","window","clearInterval","setInterval","length","xhr","XMLHttpRequest","open","send","join","sendAnalytics","chrome","storage","sync","get","items","apodUuid","uuid","i","toString","generateUuid","set","DATE_FORMAT","_actualDate","date","Date","flatpickr","parseDate","_getToday","formatDate","prettyDateFormat","toLocaleDateString","year","month","day","adjacentDate","dateString","direction","adjDate","getTime","setDate","getDate","randomDate","start","end","isToday","zeroPad","num","slice","$","el","document","querySelector","htmlToElements","html","wrap","template","createElement","wrapElement","innerHTML","content","firstElementChild","clearElement","firstChild","removeChild","celestialDictionary","planet","asteroid","moon","satellite","spacecraft","galaxy","constellation","DrawerTab","drawer","this","keycode","drawerIdx","tabs","baseView","addEventListener","toggle","bind","setKeydownListener","e","which","appendChild","render","setCurrentTabIdx","classList","add","remove","isOpen","currentTabIdx","closeTab","call","openTab","closeDrawer","openDrawer","TitleLoader","backgroundImg","force","updateBg","body","History","pastDates","currentIdx","response","map","indexOf","checkDuplicateHistory","ApodElements","image","bgImage","explanation","title","loading","error","imgQuality","showHiRes","clearKnowMore","resetElements","style","ExplanationTab","urls","hdurl","url","addKeywordClickListener","split","result","index","re","RegExp","replace","origin","hiRes","lowRes","ga","target","id","setAttribute","apodSource","textContent","knowMoreKeywordListeners","FavoritesTab","save","load","favorites","apodFavorites","isFavorite","Object","keys","favoritesEl","display","imgUrl","checkFavorite","contains","backgroundImage","listEl","DateManager","linkSelectors","specificDate","Drawer","tabsEl","createDefaultTabs","idx","Apod","state","errorCount","delayForHdLoad","history","hiResOnly","isImageHD","addToHistory","randomData","datePicker","minDate","maxDate","onChange","dates","dateStr","Component","propType","selection","string","apodType","console","log","ReactDOM","resolution","getElementById"],"mappings":"wLAKEA,EACAC,E,mGAJIC,G,MAAiB,iBACjBC,EAAwB,IAC1BC,EAAa,GAoBjB,SAASC,EAAeC,GACtB,IAAMC,EAAOD,EAAMC,MAAQ,QACvBC,EAAQ,MACZA,GAAK,eAAYN,GACjBM,GAAK,eAAYP,GACjBO,GAAK,aAAUD,GACfC,GAAK,aAAU,IACbC,KAAKC,MAAM,WAAAD,KAAKE,WAEdL,EAAMM,WACRJ,GAAK,cAAWF,EAAMM,WAGpBN,EAAMO,SACRL,GAAK,cAAWF,EAAMO,SAGpBP,EAAMQ,QACRN,GAAK,cAAWF,EAAMQ,QAGpBR,EAAMS,OACRP,GAAK,cAAWF,EAAMS,OAGxBX,EAAWY,KAAKR,GAgBhBS,OAAOC,cAAclB,GACrBA,EAAaiB,OAAOE,YAAY,WAC1Bf,EAAWgB,OAAS,GAd5B,WACE,IAAMC,EAAM,IAAIC,eAEhBD,EAAIE,KAAK,OADG,yCACU,GACtBF,EAAIG,KAAKpB,EAAWqB,KAAK,OAGzBrB,EAAa,GACba,OAAOC,cAAclB,GAOjB0B,IAEDvB,GAGU,eAASG,GACjBL,EAYHI,EAAeC,GAXfqB,OAAOC,QAAQC,KAAKC,IAAI,CAAC,YAAa,SAAAC,GACpC,GAAIA,EAAMC,SACR/B,EAAY8B,EAAMC,aACb,CACL,IAAMC,EAtEd,WAIE,IAHA,IAEEtB,EAFEsB,EAAO,GAGFC,EAAI,EAAGA,EAAI,GAAIA,IACtBvB,EAA0B,GAAhBF,KAAKE,SAAiB,EAEvB,GAALuB,GAAe,IAALA,GAAgB,IAALA,GAAgB,IAALA,IAClCD,GAAQ,KAEVA,IAAc,IAALC,EAAU,EAAS,IAALA,EAAoB,EAATvB,EAAc,EAAIA,GAAQwB,SAAS,IAEvE,OAAOF,EA0DYG,GACbT,OAAOC,QAAQC,KAAKQ,IAAI,CAAEL,SAAUC,IACpChC,EAAYgC,EAEd5B,EAAeC,MCjFfgC,EAAc,QAQpB,SAASC,EAAYC,GACnB,OAAO,IAAIC,KAAKC,IAAUC,UAAUH,EAAMF,IAG5C,SAASM,IACP,OAAOF,IAAUG,WAAW,IAAIJ,KAAQH,GAG3B,OACb,YACE,OAAOM,KAGTE,iBALa,SAKIN,GACf,OAAOD,EAAYC,GAAMO,mBAAmB,KAAM,CAChDC,KAAM,UACNC,MAAO,OACPC,IAAK,aAITC,aAba,SAaAC,EAAYC,GACvB,IAAIC,EAAU,IAAIb,KAAKF,EAAYa,GAAYG,WAG/C,OADAD,EAAU,IAAIb,KAAKa,EAAQE,QAAQF,EAAQG,UAAYJ,IAChDX,IAAUG,WAAWS,EAAShB,IAGvCoB,WApBa,WAqBX,IAAMC,EAAQ,IAAIlB,KAAK,KAAM,EAAG,IAC1BmB,EAAM,IAAInB,KACVD,EAAO,IAAIC,KACfkB,EAAMJ,UAAY9C,KAAKE,UAAYiD,EAAIL,UAAYI,EAAMJ,YAG3D,OAAOb,IAAUG,WAAWL,EAAMF,IAGpCuB,QA9Ba,SA8BLrB,GACN,OAAOD,EAAYK,KAAaW,YAAchB,EAAYC,GAAMe,YCxC7D,SAASO,EAAQC,GAEtB,OADAA,EAAM,IAAMA,EAAI5B,YACL6B,OAAO,GAIb,SAASC,EAAEC,GAChB,OAAOC,SAASC,cAAcF,GAIzB,SAASG,EAAeC,EAAMC,GACnC,IAAMC,EAAWL,SAASM,cAAc,YACpCC,EAAc,MAKlB,MAJoB,kBAATH,IACTG,EAAcH,GAEhBC,EAASG,UAAYJ,EAAI,WAAOG,EAAP,YAAsBJ,EAAtB,aAA+BI,EAA/B,KAAgDJ,EAClEE,EAASI,QAAQC,kBAGnB,SAASC,EAAaZ,GAC3B,KAAOA,EAAGa,YACRb,EAAGc,YAAYd,EAAGa,YCkYtB,IAhaA,IAAME,EAAsB,CAC1BC,OAAQ,CACN,UACA,QACA,OACA,UACA,SACA,SACA,UACA,SAGF,eAAgB,CAAC,QAAS,SAAU,WAAY,QAEhDC,SAAU,CACR,SACA,WACA,aACA,SACA,WACA,UACA,SACA,SACA,SACA,UACA,QACA,SACA,OACA,UACA,UACA,aACA,SACA,UACA,OACA,SACA,YACA,WACA,SACA,aACA,OACA,OACA,WACA,QACA,UACA,SACA,QACA,YACA,SACA,SACA,SACA,SACA,SACA,SAGFC,KAAM,CACJ,WACA,QACA,WACA,WACA,SACA,QACA,QACA,QACA,QACA,QACA,UACA,UACA,SACA,UACA,aACA,WACA,UACA,QACA,QACA,WACA,SACA,WACA,WACA,QACA,UACA,SACA,YACA,UACA,QACA,QACA,YACA,aACA,UACA,UACA,UACA,WACA,UACA,SACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,SACA,SACA,WACA,UACA,WACA,UACA,SACA,KACA,UACA,UACA,QACA,SACA,OACA,aACA,SACA,SACA,OACA,YACA,UACA,OACA,WACA,MACA,YACA,WACA,UACA,QACA,QACA,UACA,QACA,aACA,QACA,QACA,SACA,OACA,SACA,UACA,WACA,UACA,UACA,MACA,UACA,WACA,WACA,UACA,SACA,SACA,aACA,SACA,YACA,aACA,WACA,UACA,WACA,OACA,OACA,WACA,MACA,UACA,UACA,SACA,SACA,SACA,WACA,WACA,UACA,SACA,UACA,UACA,SACA,WACA,QACA,YACA,WACA,SACA,SACA,QACA,UACA,WACA,SACA,UACA,QAGFC,UAAW,CACT,SACA,aACA,eACA,UACA,UACA,WAGFC,WAAY,CAAC,SAAU,WAAY,SAAU,WAE7CC,OAAQ,CACN,YACA,YACA,SACA,YACA,QACA,oBACA,gBACA,yBACA,kBACA,YACA,WACA,yBACA,WACA,YACA,UACA,aAGFC,cAAe,CACb,WACA,QACA,YACA,SACA,OACA,WACA,SACA,MACA,SACA,QACA,QACA,SACA,UACA,kBACA,WACA,aACA,UACA,mBACA,SACA,OACA,SACA,iBACA,eACA,SACA,iBACA,cACA,cACA,cACA,SACA,oBACA,aACA,aACA,UACA,YACA,UACA,UACA,SACA,QACA,YACA,YACA,aACA,WACA,QACA,UACA,iBACA,YACA,mBACA,kBACA,SACA,OACA,QACA,OACA,OACA,SACA,YACA,UACA,SACA,OACA,QACA,QACA,QACA,QACA,WACA,WACA,WACA,QACA,SACA,cACA,SACA,MACA,UACA,SACA,UACA,UACA,OACA,WACA,eACA,YACA,OACA,OACA,OACA,WACA,WACA,WACA,oBACA,aACA,eACA,QACA,SACA,QACA,0BACA,mBACA,UACA,YACA,MACA,MACA,QACA,QACA,cACA,gBACA,aACA,eACA,cACA,SACA,QACA,QACA,OACA,OACA,OACA,OACA,oBACA,QACA,QACA,aACA,eACA,YACA,QACA,QACA,iBACA,SACA,SACA,YACA,QACA,QACA,UACA,OACA,UACA,UACA,UACA,UACA,UACA,UACA,SACA,SACA,mBACA,mBACA,WACA,uBACA,SACA,QACA,oBACA,MACA,QACA,YACA,UACA,cACA,OACA,SACA,WACA,WACA,WACA,WACA,kBACA,SACA,WACA,cACA,cACA,UACA,UACA,iBACA,UACA,UACA,SACA,cACA,iBACA,iBACA,gBACA,gBACA,eACA,oBACA,yBACA,eACA,OACA,YACA,SACA,cACA,cACA,aACA,SACA,sBACA,aACA,aACA,SACA,QACA,UACA,aACA,aACA,OACA,SACA,QACA,SACA,YACA,eACA,cACA,QACA,iBAKKtD,EAAI,EAAGA,GAAK,IAAKA,IACxB+C,EAAoBM,OAAOvE,KAAK,IAAMkB,GAGzB+C,ICpaMQ,E,WACnB,WAAYvB,EAAIwB,GAAS,oBACvBC,KAAKzB,GAAKD,EAAEC,GACZyB,KAAKC,QAAU,KACfD,KAAKD,OAASA,EACdC,KAAKE,UAAYF,KAAKD,OAAOI,KAAK1E,OAClCuE,KAAKI,SAAWL,EAAOxB,GAAGE,cAAc,sBACxCuB,KAAKD,OAAOI,KAAK9E,KAAK2E,MAEtBA,KAAKzB,GAAG8B,iBAAiB,QAASL,KAAKM,OAAOC,KAAKP,OACnDxB,SAAS6B,iBAAiB,UAAWL,KAAKQ,mBAAmBD,KAAKP,O,+DAGjDS,GACbT,KAAKC,SAAWQ,EAAEC,QAAUV,KAAKC,SACnCD,KAAKM,W,gCAKPnB,EAAaa,KAAKI,UAClBJ,KAAKI,SAASO,YAAYX,KAAKnB,UAC/BmB,KAAKY,SACLZ,KAAKD,OAAOc,iBAAiBb,KAAKE,WAClCF,KAAKzB,GAAGuC,UAAUC,IAAI,a,iCAItBf,KAAKzB,GAAGuC,UAAUE,OAAO,a,+BAIpBhB,KAAKD,OAAOkB,OAKXjB,KAAKD,OAAOmB,gBAAkBlB,KAAKE,WACrCF,KAAKmB,SAASC,KA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","file":"static/js/main.09e5f046.chunk.js","sourcesContent":["/*global chrome*/\n\nconst GA_TRACKING_ID = \"UA-91390132-1\";\nconst analyticsSendInterval = 5 * 1000;\nlet parameters = [],\n  intervalFn,\n  CLIENT_ID;\n\n// from: https://gist.github.com/jcxplorer/823878\nfunction generateUuid() {\n  let uuid = \"\",\n    i,\n    random;\n  for (let i = 0; i < 32; i++) {\n    random = (Math.random() * 16) | 0;\n\n    if (i == 8 || i == 12 || i == 16 || i == 20) {\n      uuid += \"-\";\n    }\n    uuid += (i == 12 ? 4 : i == 16 ? (random & 3) | 8 : random).toString(16);\n  }\n  return uuid;\n}\n\nfunction buildParameter(event) {\n  const type = event.type || \"event\";\n  let param = \"v=1\";\n  param += `&tid=${GA_TRACKING_ID}`;\n  param += `&cid=${CLIENT_ID}`;\n  param += `&t=${type}`;\n  param += `&z=${1000000000 +\n    Math.floor(Math.random() * (2147483647 - 1000000000))}`;\n\n  if (event.category) {\n    param += `&ec=${event.category}`;\n  }\n\n  if (event.action) {\n    param += `&ea=${event.action}`;\n  }\n\n  if (event.label) {\n    param += `&el=${event.label}`;\n  }\n\n  if (event.page) {\n    param += `&dp=${event.page}`;\n  }\n\n  parameters.push(param);\n  updateInterval();\n}\n\nfunction sendAnalytics() {\n  const xhr = new XMLHttpRequest();\n  const url = \"http://www.google-analytics.com/batch\";\n  xhr.open(\"POST\", url, true);\n  xhr.send(parameters.join(\"\\n\"));\n\n  // reset for next round of data\n  parameters = [];\n  window.clearInterval(intervalFn);\n}\n\nfunction updateInterval() {\n  window.clearInterval(intervalFn); // debounces\n  intervalFn = window.setInterval(() => {\n    if (parameters.length > 0) {\n      sendAnalytics();\n    }\n  }, analyticsSendInterval);\n}\n\nexport default function(event) {\n  if (!CLIENT_ID) {\n    chrome.storage.sync.get([\"apodUuid\"], items => {\n      if (items.apodUuid) {\n        CLIENT_ID = items.apodUuid;\n      } else {\n        const uuid = generateUuid();\n        chrome.storage.sync.set({ apodUuid: uuid });\n        CLIENT_ID = uuid;\n      }\n      buildParameter(event);\n    });\n  } else {\n    buildParameter(event);\n  }\n}\n","import flatpickr from \"flatpickr\";\n\nconst DATE_FORMAT = \"Y-m-d\";\n\n/**\n * Gives the actual date (with timezone) at midnight\n *\n * @param  {string} date\n * @return {Date}\n */\nfunction _actualDate(date) {\n  return new Date(flatpickr.parseDate(date, DATE_FORMAT));\n}\n\nfunction _getToday() {\n  return flatpickr.formatDate(new Date(), DATE_FORMAT);\n}\n\nexport default {\n  get today() {\n    return _getToday();\n  },\n\n  prettyDateFormat(date) {\n    return _actualDate(date).toLocaleDateString(\"en\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    });\n  },\n\n  adjacentDate(dateString, direction) {\n    let adjDate = new Date(_actualDate(dateString).getTime());\n\n    adjDate = new Date(adjDate.setDate(adjDate.getDate() + direction));\n    return flatpickr.formatDate(adjDate, DATE_FORMAT);\n  },\n\n  randomDate() {\n    const start = new Date(1995, 5, 16);\n    const end = new Date();\n    const date = new Date(\n      start.getTime() + Math.random() * (end.getTime() - start.getTime())\n    );\n\n    return flatpickr.formatDate(date, DATE_FORMAT);\n  },\n\n  isToday(date) {\n    return _actualDate(_getToday()).getTime() === _actualDate(date).getTime();\n  }\n};\n","/* Randomizer */\nexport function randomizer(max, min) {\n  min = min || 0;\n  max = max || 1;\n\n  return Math.round(Math.random() * (max - min) + min);\n}\n\n// Zero pad dates\nexport function zeroPad(num) {\n  num = \"0\" + num.toString();\n  return num.slice(-2);\n}\n\n// Query selector shortcut (mimic jQuery)\nexport function $(el) {\n  return document.querySelector(el);\n}\n\n// Alternative to innerHTML\nexport function htmlToElements(html, wrap) {\n  const template = document.createElement(\"template\");\n  let wrapElement = \"div\";\n  if (typeof wrap === \"string\") {\n    wrapElement = wrap;\n  }\n  template.innerHTML = wrap ? `<${wrapElement}>${html}</${wrapElement}>` : html;\n  return template.content.firstElementChild;\n}\n\nexport function clearElement(el) {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n}\n","\"use strict\";\n\nconst celestialDictionary = {\n  planet: [\n    \"mercury\",\n    \"venus\",\n    \"mars\",\n    \"jupiter\",\n    \"saturn\",\n    \"uranus\",\n    \"neptune\",\n    \"pluto\"\n  ],\n\n  \"dwarf planet\": [\"ceres\", \"haumea\", \"makemake\", \"eris\"],\n\n  asteroid: [\n    \"alauda\",\n    \"aletheia\",\n    \"amphitrite\",\n    \"aurora\",\n    \"bamberga\",\n    \"camilla\",\n    \"cybele\",\n    \"daphne\",\n    \"davida\",\n    \"diotima\",\n    \"doris\",\n    \"egeria\",\n    \"eros\",\n    \"eugenia\",\n    \"eunomia\",\n    \"euphrosyne\",\n    \"europa\",\n    \"fortuna\",\n    \"hebe\",\n    \"hektor\",\n    \"herculina\",\n    \"hermione\",\n    \"hygiea\",\n    \"interamnia\",\n    \"iris\",\n    \"juno\",\n    \"lachesis\",\n    \"metis\",\n    \"nemesis\",\n    \"pallas\",\n    \"palma\",\n    \"patientia\",\n    \"psyche\",\n    \"sylvia\",\n    \"themis\",\n    \"thisbe\",\n    \"ursula\",\n    \"vesta\"\n  ],\n\n  moon: [\n    \"adrastea\",\n    \"aitne\",\n    \"albiorix\",\n    \"amalthea\",\n    \"ananke\",\n    \"anthe\",\n    \"aoede\",\n    \"arche\",\n    \"ariel\",\n    \"atlas\",\n    \"autonoe\",\n    \"belinda\",\n    \"bianca\",\n    \"caliban\",\n    \"callirrhoe\",\n    \"callisto\",\n    \"calypso\",\n    \"carme\",\n    \"carpo\",\n    \"chaldene\",\n    \"charon\",\n    \"cordelia\",\n    \"cressida\",\n    \"cupid\",\n    \"cyllene\",\n    \"deimos\",\n    \"desdemona\",\n    \"despina\",\n    \"dione\",\n    \"elara\",\n    \"enceladus\",\n    \"epimetheus\",\n    \"erinome\",\n    \"erriapo\",\n    \"euanthe\",\n    \"eukelade\",\n    \"euporie\",\n    \"europa\",\n    \"eurydome\",\n    \"ferdinand\",\n    \"francisco\",\n    \"galatea\",\n    \"ganymede\",\n    \"halimede\",\n    \"harpalyke\",\n    \"hegemone\",\n    \"helene\",\n    \"helike\",\n    \"hermippe\",\n    \"himalia\",\n    \"hyperion\",\n    \"iapetus\",\n    \"ijiraq\",\n    \"io\",\n    \"iocaste\",\n    \"isonone\",\n    \"janus\",\n    \"juliet\",\n    \"kale\",\n    \"kallichore\",\n    \"kalyke\",\n    \"kiviuq\",\n    \"kore\",\n    \"laomedeia\",\n    \"larissa\",\n    \"leda\",\n    \"lysithea\",\n    \"mab\",\n    \"magaclite\",\n    \"margaret\",\n    \"methone\",\n    \"metis\",\n    \"mimas\",\n    \"miranda\",\n    \"mneme\",\n    \"mundilfari\",\n    \"naiad\",\n    \"narvi\",\n    \"nereid\",\n    \"neso\",\n    \"oberon\",\n    \"ophelia\",\n    \"orthosie\",\n    \"paaliaq\",\n    \"pallene\",\n    \"pan\",\n    \"pandora\",\n    \"pasiphae\",\n    \"pasithee\",\n    \"perdita\",\n    \"phobos\",\n    \"phoebe\",\n    \"polydeuces\",\n    \"portia\",\n    \"praxidike\",\n    \"prometheus\",\n    \"prospero\",\n    \"proteus\",\n    \"psamathe\",\n    \"puck\",\n    \"rhea\",\n    \"rosalind\",\n    \"sao\",\n    \"setebos\",\n    \"siarnaq\",\n    \"sinope\",\n    \"skathi\",\n    \"sponde\",\n    \"stephano\",\n    \"suttungr\",\n    \"sycorax\",\n    \"tarvos\",\n    \"taygete\",\n    \"telesto\",\n    \"tethys\",\n    \"thalassa\",\n    \"thebe\",\n    \"thelxinoe\",\n    \"themisto\",\n    \"thrymr\",\n    \"thyone\",\n    \"titan\",\n    \"titania\",\n    \"trinculo\",\n    \"triton\",\n    \"umbriel\",\n    \"ymir\"\n  ],\n\n  satellite: [\n    \"hubble\",\n    \"james webb\",\n    \"new horizons\",\n    \"voyager\",\n    \"spitzer\",\n    \"cassini\"\n  ],\n\n  spacecraft: [\"apollo\", \"saturn v\", \"gemini\", \"shuttle\"],\n\n  galaxy: [\n    \"andromeda\",\n    \"black eye\",\n    \"bode's\",\n    \"cartwheel\",\n    \"cigar\",\n    \"cosmos redshift 7\",\n    \"hoag's object\",\n    \"large magellanic cloud\",\n    \"mayall's object\",\n    \"milky way\",\n    \"pinwheel\",\n    \"small magellanic cloud\",\n    \"sombrero\",\n    \"sunflower\",\n    \"tadpole\",\n    \"whirlpool\"\n  ],\n\n  constellation: [\n    \"air pump\",\n    \"altar\",\n    \"andromeda\",\n    \"antlia\",\n    \"apus\",\n    \"aquarius\",\n    \"aquila\",\n    \"ara\",\n    \"archer\",\n    \"aries\",\n    \"arrow\",\n    \"auriga\",\n    \"balance\",\n    \"berenice's hair\",\n    \"big bear\",\n    \"big dipper\",\n    \"big dog\",\n    \"bird of paradise\",\n    \"bootes\",\n    \"bull\",\n    \"caelum\",\n    \"camelopardalis\",\n    \"camelopardus\",\n    \"cancer\",\n    \"canes venatici\",\n    \"canis major\",\n    \"canis minor\",\n    \"capricornus\",\n    \"carina\",\n    \"carpenter's level\",\n    \"cassiopeia\",\n    \"cassiopeia\",\n    \"centaur\",\n    \"centaurus\",\n    \"cepheus\",\n    \"cepheus\",\n    \"cephus\",\n    \"cetus\",\n    \"chameleon\",\n    \"chameleon\",\n    \"charioteer\",\n    \"circinus\",\n    \"clock\",\n    \"columba\",\n    \"coma berenices\",\n    \"compasses\",\n    \"corona australis\",\n    \"corona borealis\",\n    \"corvus\",\n    \"crab\",\n    \"crane\",\n    \"crow\",\n    \"crux\",\n    \"cygnus\",\n    \"delphinus\",\n    \"dolphin\",\n    \"dorado\",\n    \"dove\",\n    \"draco\",\n    \"draco\",\n    \"eagle\",\n    \"easel\",\n    \"equuleus\",\n    \"eridanus\",\n    \"eridanus\",\n    \"filly\",\n    \"fishes\",\n    \"flying fish\",\n    \"fornax\",\n    \"fox\",\n    \"furnace\",\n    \"gemini\",\n    \"giraffe\",\n    \"giraffe\",\n    \"goat\",\n    \"goldfish\",\n    \"graving tool\",\n    \"great dog\",\n    \"grus\",\n    \"hare\",\n    \"harp\",\n    \"hercules\",\n    \"hercules\",\n    \"herdsman\",\n    \"holder of serpent\",\n    \"horologium\",\n    \"hunting dogs\",\n    \"hydra\",\n    \"indian\",\n    \"indus\",\n    \"keel of argonauts' ship\",\n    \"king of ethiopia\",\n    \"lacerta\",\n    \"leo minor\",\n    \"leo\",\n    \"leo\",\n    \"lepus\",\n    \"libra\",\n    \"little bear\",\n    \"little dipper\",\n    \"little dog\",\n    \"little horse\",\n    \"little lion\",\n    \"lizard\",\n    \"lupus\",\n    \"lupus\",\n    \"lynx\",\n    \"lynx\",\n    \"lyra\",\n    \"lyre\",\n    \"mariner's compass\",\n    \"mensa\",\n    \"mensa\",\n    \"microscope\",\n    \"microscopium\",\n    \"monoceros\",\n    \"musca\",\n    \"norma\",\n    \"northern crown\",\n    \"octans\",\n    \"octant\",\n    \"ophiuchus\",\n    \"orion\",\n    \"orion\",\n    \"painter\",\n    \"pavo\",\n    \"peacock\",\n    \"pegasus\",\n    \"pegasus\",\n    \"perseus\",\n    \"phoenix\",\n    \"phoenix\",\n    \"pictor\",\n    \"pisces\",\n    \"piscis austrinis\",\n    \"piscis austrinus\",\n    \"porpoise\",\n    \"princess of ethiopia\",\n    \"puppis\",\n    \"pyxis\",\n    \"queen of ethiopia\",\n    \"ram\",\n    \"raven\",\n    \"reticulum\",\n    \"sagitta\",\n    \"sagittarius\",\n    \"sail\",\n    \"scales\",\n    \"scorpion\",\n    \"scorpius\",\n    \"sculptor\",\n    \"sculptor\",\n    \"sculptor's tool\",\n    \"scutum\",\n    \"sea goat\",\n    \"sea monster\",\n    \"sea serpent\",\n    \"serpens\",\n    \"serpent\",\n    \"serpent-bearer\",\n    \"sextans\",\n    \"sextant\",\n    \"shield\",\n    \"son of zeus\",\n    \"southern cross\",\n    \"southern crown\",\n    \"southern fish\",\n    \"southern fish\",\n    \"southern fly\",\n    \"southern triangle\",\n    \"stern of the argonauts\",\n    \"straightedge\",\n    \"swan\",\n    \"swordfish\",\n    \"taurus\",\n    \"telescopium\",\n    \"telescopium\",\n    \"the hunter\",\n    \"toucan\",\n    \"triangulum australe\",\n    \"triangulum\",\n    \"triangulum\",\n    \"tucana\",\n    \"twins\",\n    \"unicorn\",\n    \"ursa major\",\n    \"ursa minor\",\n    \"vela\",\n    \"virgin\",\n    \"virgo\",\n    \"volans\",\n    \"vulpecula\",\n    \"water bearer\",\n    \"water snake\",\n    \"whale\",\n    \"winged horse\"\n  ]\n};\n\n// Add Messier Objects (110 total)\nfor (let i = 1; i <= 110; i++) {\n  celestialDictionary.galaxy.push(\"M\" + i);\n}\n\nexport default celestialDictionary;\n","import { $, clearElement } from \"../utilities\";\n\nexport default class DrawerTab {\n  constructor(el, drawer) {\n    this.el = $(el);\n    this.keycode = null;\n    this.drawer = drawer;\n    this.drawerIdx = this.drawer.tabs.length;\n    this.baseView = drawer.el.querySelector(\".apod__drawer-view\");\n    this.drawer.tabs.push(this);\n\n    this.el.addEventListener(\"click\", this.toggle.bind(this));\n    document.addEventListener(\"keydown\", this.setKeydownListener.bind(this));\n  }\n\n  setKeydownListener(e) {\n    if (this.keycode && e.which === this.keycode) {\n      this.toggle();\n    }\n  }\n\n  openTab() {\n    clearElement(this.baseView);\n    this.baseView.appendChild(this.template);\n    this.render();\n    this.drawer.setCurrentTabIdx(this.drawerIdx);\n    this.el.classList.add(\"is-open\");\n  }\n\n  closeTab() {\n    this.el.classList.remove(\"is-open\");\n  }\n\n  toggle() {\n    if (!this.drawer.isOpen) {\n      this.openTab();\n      this.drawer.openDrawer();\n    } else {\n      // Drawer open, click another tab\n      if (this.drawer.currentTabIdx !== this.drawerIdx) {\n        this.closeTab.call(this.drawer.tabs[this.drawer.currentTabIdx]);\n        this.openTab();\n        // Click opened tab to close\n      } else {\n        this.closeTab();\n        this.drawer.closeDrawer();\n      }\n    }\n  }\n}\n","import { htmlToElements } from \"./utilities\";\n\nclass SunLoader {\n  constructor() {\n    this.bigRayCount = 12;\n    this.littleRayCount = 8;\n    this.template = `\n            <div class='sun-container'>\n                <div class='rays-big' id='big-rays'>${this.buildRays(\n                  this.bigRayCount\n                )}</div>\n                <div class='rays-small' id='small-rays'>${this.buildRays(\n                  this.littleRayCount\n                )}</div>\n                <div class='sun-light'></div>\n            </div>`;\n  }\n\n  buildRays(num) {\n    const rayEl = \"<div class='ray'></div>\";\n    let rays = \"\";\n\n    for (let i = 0; i < num; i++) {\n      rays += rayEl;\n    }\n\n    return rays;\n  }\n\n  render() {\n    return htmlToElements(this.template);\n  }\n}\n\nclass MoonLoader {\n  render() {\n    return htmlToElements(`\n            <div class='moon-container'>\n                <div class='mask-left'>\n                    <div class='moon shade-to-light'></div>\n                    <div class='moon light-to-shade'></div>\n                </div>\n\n                <div class='mask-right'>\n                    <div class='moon shade-to-light'></div>\n                    <div class='moon light-to-shade'></div>\n                </div>\n            </div>`);\n  }\n}\n\nclass TitleLoader {\n  constructor(el) {\n    this.el = el;\n    this.backgroundImg = \"/images/stars.png\";\n  }\n\n  updateBg(backgroundImg) {\n    this.backgroundImg = backgroundImg || this.backgroundImg;\n    this.render();\n  }\n\n  toggle(force) {\n    this.updateBg();\n    this.el.classList.toggle(\"hide\", !!force);\n  }\n\n  render() {\n    this.el.innerHTML = \"\";\n\n    const body = htmlToElements(`\n    <div class=\"load-title\">\n      <div class='title-container'>  \n        <h1 class=\"apod-name\">APOD</h1>\n        <p>By The Trav</p>\n      </div>\n    </div>\n  `);\n\n    this.el.appendChild(body);\n  }\n}\n\nexport { SunLoader, MoonLoader, TitleLoader };\n","class History {\n  constructor() {\n    this.pastDates = [];\n    this.currentIdx = this.pastDates.length;\n  }\n\n  checkDuplicateHistory(response) {\n    const dates = this.pastDates.map(response => {\n      return response.date;\n    });\n\n    return dates.indexOf(response.date) === -1;\n  }\n\n  add(response) {\n    if (this.checkDuplicateHistory(response)) {\n      this.pastDates.push(response);\n      this.currentIdx = this.pastDates.length - 1;\n    }\n  }\n\n  recall(direction) {\n    if (direction > 0 && this.currentIdx < this.pastDates.length - 1)\n      this.currentIdx += direction;\n    else if (direction < 0 && this.currentIdx > 0) {\n      this.currentIdx += direction;\n    } else {\n      return false;\n    }\n\n    return this.pastDates[this.currentIdx];\n  }\n}\n\nexport default History;\n","import { $, clearElement } from \"../utilities\";\nimport { TitleLoader } from \"../LoadingSpinner\";\n\nconst ApodElements = {\n  // Initialize image & video elements\n  image: $(\"#apod-image\"),\n  bgImage: $(\"#apod-image-vertical-bg\"),\n  explanation: $(\".apod__header .explanation\"),\n\n  // Initialize various elements\n  title: $(\"#apod-title\"),\n  date: $(\"#apod-date\"),\n  loading: new TitleLoader($(\"#apod-loading\")),\n  error: $(\"#apod-error\"),\n  imgQuality: $(\"#img-quality\"),\n  showHiRes: $(\".nav-buttons #show-hi-res\"),\n\n  clearKnowMore: () => {\n    clearElement($(\"#know-more-tabs\"));\n  },\n\n  resetElements: () => {\n    ApodElements.image.classList.add(\"hide\");\n    ApodElements.image.innerHTML = \"\";\n    ApodElements.bgImage.style[\"background-image\"] = \"\";\n    ApodElements.explanation.classList.add(\"hide\");\n    ApodElements.showHiRes.classList.add(\"hide\");\n    ApodElements.loading.toggle(false);\n    ApodElements.clearKnowMore();\n  }\n};\n\nexport default ApodElements;\n","import { $, clearElement, htmlToElements, zeroPad } from \"../utilities\";\nimport ga from \"../utilities/ga\";\nimport DrawerTab from \"./DrawerTab\";\n\nexport default class ExplanationTab extends DrawerTab {\n  constructor(el, drawer) {\n    super(el, drawer);\n    this.keycode = 69;\n    this.title = \"\";\n    this.date = \"\";\n    this.urls = {\n      hdurl: \"\",\n      url: \"\"\n    };\n    this.explanation = \"\";\n    this.template = htmlToElements(`\n            <div class='explanation'>\n                <h2 class='title'></h2>\n\n                <div id='apod-explanation'></div>\n\n                <div class='external-links'>\n                    <a id='apod-origin' target='_blank'>View this APOD</a>\n                    <a id='apod-hires'  target='_blank'>Hi-res</a>\n                    <a id='apod-lowres' target='_blank'>Low-res</a>\n                </div>\n            </div>\n        `);\n  }\n\n  knowMoreKeywordListeners() {\n    const tabs = this.drawer.tabs.slice(2);\n\n    for (let i = 0; i < tabs.length; i++) {\n      tabs[i].addKeywordClickListener();\n    }\n  }\n\n  /**\n   * Build filename for APOD site: ap170111.html\n   *\n   * @return {String} \"2011-02-15\"\n   */\n  apodSource() {\n    if (!this.date) return;\n\n    const date = this.date.split(\"-\");\n    return `ap${date[0].slice(-2)}${zeroPad(date[1])}${zeroPad(date[2])}.html`;\n  }\n\n  highlightKeywords(result, index) {\n    const re = new RegExp(\"\\\\b(\" + result + \")\\\\b\", \"gi\");\n    this.explanation = this.explanation.replace(\n      re,\n      `<span class=\"keyword keyword-${index}\">$1</span>`\n    );\n  }\n\n  render() {\n    const origin = this.baseView.querySelector(\"#apod-origin\");\n    const hiRes = this.baseView.querySelector(\"#apod-hires\");\n    const lowRes = this.baseView.querySelector(\"#apod-lowres\");\n    const title = this.baseView.querySelector(\"h2.title\");\n    const explanation = $(\"#apod-explanation\");\n    clearElement(explanation);\n\n    $(\".external-links\").addEventListener(\"click\", e => {\n      ga({\n        category: \"Outbound Link\",\n        action: \"clicked\",\n        label: e.target.id\n      });\n    });\n\n    origin.setAttribute(\n      \"href\",\n      `https://apod.nasa.gov/apod/${this.apodSource()}`\n    );\n    hiRes.setAttribute(\"href\", this.urls.hdurl);\n    lowRes.setAttribute(\"href\", this.urls.url);\n    title.textContent = this.title;\n    explanation.appendChild(htmlToElements(this.explanation, true));\n\n    this.knowMoreKeywordListeners();\n  }\n}\n","/*global chrome*/\n\nimport { $, clearElement, htmlToElements } from \"../utilities\";\nimport DrawerTab from \"./DrawerTab\";\nimport DateManager from \"../DateManager\";\n\nexport default class FavoritesTab extends DrawerTab {\n  constructor(el, drawer) {\n    super(el, drawer);\n    this.keycode = 70;\n    this.template = htmlToElements(`\n            <div class='favorites'>\n                <h2>Favorite APOD's</h2>\n                <ul id='drawer-list'></ul>\n            </div>\n        `);\n\n    $(\".add-favorite\").addEventListener(\"click\", this.save.bind(this));\n\n    this.load();\n  }\n\n  load() {\n    chrome.storage.sync.get([\"apodFavorites\"], favorites => {\n      this.favorites = favorites.apodFavorites || {};\n    });\n  }\n\n  checkFavorite() {\n    const favoriteDates = Object.keys(this.favorites);\n    const isFavorite = favoriteDates.indexOf(this.date) > 0;\n    const favoritesEl = $(\".add-favorite\");\n    const display = isFavorite\n      ? htmlToElements(`<span class=\"favorite\">Favorite</span>`)\n      : htmlToElements(`<span class=\"not-favorite\">Save</span>`);\n\n    clearElement(favoritesEl);\n    favoritesEl.appendChild(display);\n  }\n\n  save() {\n    if (this.favorites[this.date]) {\n      delete this.favorites[this.date];\n    } else {\n      this.favorites[this.date] = {\n        title: this.title,\n        imgUrl: this.url\n      };\n    }\n\n    chrome.storage.sync.set({\n      apodFavorites: this.favorites\n    });\n\n    this.checkFavorite();\n\n    this.load();\n\n    if (this.el.classList.contains(\"is-open\")) {\n      this.render();\n    }\n  }\n\n  render() {\n    let favoritesEl = this.baseView.querySelector(\"#drawer-list\");\n    clearElement(favoritesEl);\n\n    if (Object.keys(this.favorites).length === 0) {\n      favoritesEl.appendChild(\n        htmlToElements(`\n                <li class='no-favorites'>\n                    <h4>You don't have any favorites yet!</h4>\n                    <h4>Click the \"Save Favorite\" button at the top right of the page!</h4>\n                </li>`)\n      );\n    }\n\n    for (let date in this.favorites) {\n      const favorite = this.favorites[date];\n      const backgroundImage =\n        'background-image: url(\"' + favorite.imgUrl + '\")';\n\n      const listEl = htmlToElements(\n        `<li class='favorite'>\n                    <div class='favorite__image'>\n                        <div class='favorite__image-image' style='${backgroundImage}'></div>\n                    </div>\n                    <div class='favorite__title'>\n                        <p class='favorite__title-date'>${DateManager.prettyDateFormat(\n                          date\n                        )}</p>\n                        <p class='favorite__title-title'>${\n                          this.favorites[date].title\n                        }</p>\n                    </div>\n                    <div class='remove-favorite'>Remove</div>\n                </li>`\n      );\n\n      listEl.querySelector(\".remove-favorite\").addEventListener(\"click\", () => {\n        delete this.favorites[date];\n\n        chrome.storage.sync.set({\n          apodFavorites: this.favorites\n        });\n\n        this.render();\n      });\n\n      const linkSelectors = [\n        \".favorite__image\",\n        \".favorite__title-title\",\n        \".favorite__title-date\"\n      ];\n\n      for (let i in linkSelectors) {\n        listEl.querySelector(linkSelectors[i]).addEventListener(\"click\", () => {\n          this.specificDate(date);\n        });\n      }\n\n      favoritesEl.appendChild(listEl);\n    }\n  }\n}\n","import { $ } from \"../utilities\";\nimport ExplanationTab from \"../tabs/ExplanationTab\";\nimport FavoritesTab from \"../tabs/FavoritesTab\";\n\nclass Drawer {\n  constructor(el) {\n    this.el = $(el);\n    this.tabsEl = this.el.querySelector(\".apod__drawer-tabs\");\n    this.tabs = [];\n    this.isOpen = false;\n    this.currentTabIdx = 0;\n    this.createDefaultTabs();\n    document.addEventListener(\"keydown\", e => {\n      if (e.which === 27 && this.isOpen) {\n        this.closeDrawer();\n      }\n    });\n  }\n\n  createDefaultTabs() {\n    new ExplanationTab(\"#tab-explanation\", this);\n    new FavoritesTab(\"#tab-favorites\", this);\n  }\n\n  resetTabs() {\n    this.closeDrawer();\n    this.currentTabIdx = null;\n    this.tabs = this.tabs.slice(0, 2);\n  }\n\n  openDrawer() {\n    this.el.classList.add(\"show\");\n    this.isOpen = true;\n  }\n\n  closeDrawer() {\n    this.el.classList.remove(\"show\");\n    this.isOpen = false;\n\n    if (this.currentTabIdx && this.currentTabIdx >= 0) {\n      this.tabs[this.currentTabIdx].closeTab();\n    }\n  }\n\n  setCurrentTabIdx(idx) {\n    this.currentTabIdx = idx;\n  }\n}\n\nexport default Drawer;\n","import React, { Component } from \"react\";\nimport { string } from \"prop-types\";\nimport reqwest from \"reqwest\";\nimport flatpickr from \"flatpickr\";\nimport { stringify } from \"querystring\";\n\nimport ga from \"../utilities/ga\";\nimport DateManager from \"../DateManager\";\nimport KnowMoreComponent from \"./KnowMore\";\nimport History from \"./History\";\nimport NavigationButton from \"../NavigationButton\";\nimport ApodElements from \"./Elements\";\nimport Drawer from \"./Drawer\";\nimport { htmlToElements } from \"../utilities\";\n\nconst ERROR_MESSAGE = \"NASA APOD Error: Please reload or try Again Later\";\nconst RANDOM_COUNT = 15;\nconst ERROR_LIMIT = 3;\n\nclass Apod extends Component {\n  static propType = {\n    selection: string\n  };\n\n  state = {\n    errorCount: 0,\n    delayForHdLoad: 3000,\n    history: new History(),\n    drawer: new Drawer(\"#apod-drawer\"),\n    hiResOnly: false,\n    isImageHD: true,\n    addToHistory: true,\n    randomData: [],\n    datePicker: flatpickr(ApodElements.date, {\n      minDate: \"1995-6-16\",\n      maxDate: \"today\",\n      onChange: (dates, dateStr) => {\n        this.specificDate(dateStr);\n      }\n    })\n  };\n\n  render() {\n    return <h1>Apod</h1>;\n  }\n\n  // document.addEventListener(\"keyup\", e => {\n  //   if (this.addToHistory) {\n  //     let recalledResponse = false;\n\n  //     if (e.which === 37) {\n  //       // left arrow key\n  //       recalledResponse = this.history.recall(-1);\n  //     } else if (e.which === 39) {\n  //       // right arrow key\n  //       recalledResponse = this.history.recall(1);\n  //     }\n\n  //     if (recalledResponse) {\n  //       this._setLoadingView();\n  //       this.addToHistory = false;\n  //       this.formatResponse(recalledResponse);\n  //     }\n  //   }\n  // });\n\n  // Initialize button objects\n  //   this.navigation = {\n  //     random: new NavigationButton(\".nav-buttons .random\", 82, \"random\", this),\n  //     previous: new NavigationButton(\n  //       \".nav-buttons .previous\",\n  //       74,\n  //       \"previous\",\n  //       this\n  //     ),\n  //     current: new NavigationButton(\n  //       \".nav-buttons .current\",\n  //       84,\n  //       \"current\",\n  //       this\n  //     ),\n  //     next: new NavigationButton(\".nav-buttons .next\", 75, \"next\", this)\n  //   };\n  // }\n\n  // specificDate(date) {\n  //   this.getApod(date);\n  // }\n\n  // random() {\n  //   if (this.randomData.length && this.randomIdx < this.randomData.length - 1) {\n  //     if (this.randomIdx >= this.randomData.length - 3) {\n  //       this.requestRandom().then(this.preloadRandoms.bind(this));\n  //     }\n\n  //     this.randomIdx += 1;\n  //     this._setLoadingView();\n  //     this.formatResponse(this.randomData[this.randomIdx]);\n  //   } else {\n  //     this.getApod();\n  //   }\n  // }\n\n  // previous() {\n  //   this.getApod(DateManager.adjacentDate(this.response.date, -1));\n  // }\n\n  // next() {\n  //   this.getApod(DateManager.adjacentDate(this.response.date, 1));\n  // }\n\n  // current() {\n  //   this.getApod(DateManager.today);\n  // }\n\n  // addFadedBackground() {\n  //   ApodElements.bgImage.style[\"background-image\"] = `url(${\n  //     this.loadedImage.src\n  //   })`;\n  //   ApodElements.bgImage.classList.remove(\"hide\");\n  // }\n\n  // backgroundSize() {\n  //   const widthGTwindow = this.loadedImage.width > window.innerWidth;\n  //   const heightGTwindow = this.loadedImage.height > window.innerHeight;\n  //   const aspectRatio = this.loadedImage.width / this.loadedImage.height;\n\n  //   if (widthGTwindow || heightGTwindow) {\n  //     this.addFadedBackground();\n  //     return aspectRatio >= 1.3 ? \"cover\" : \"contain\";\n  //   }\n\n  //   if (\n  //     this.loadedImage.width / window.innerWidth > 0.5 ||\n  //     this.loadedImage.height / window.innerHeight > 0.5\n  //   ) {\n  //     this.addFadedBackground();\n  //   }\n\n  //   return \"auto\";\n  // }\n\n  // _setLoadingView() {\n  //   ApodElements.resetElements();\n  //   this.drawer.resetTabs();\n  // }\n\n  // get isRequestValid() {\n  //   if (this.isRequestInProgress) {\n  //     return false;\n  //   }\n\n  //   this.isRequestInProgress = true;\n  //   return this.isRequestInProgress;\n  // }\n\n  // getApod(date) {\n  //   if (!this.isRequestValid) {\n  //     console.log(\"Request in Progress!\");\n  //     return;\n  //   }\n  //   this._setLoadingView();\n  //   const request = date ? this.requestSpecific(date) : this.requestRandom();\n  //   request.then(this.formatResponse.bind(this), this.errorResponse.bind(this));\n  // }\n\n  // requestSpecific(date) {\n  //   return this.createRequest({\n  //     date,\n  //     api_key: \"hPgI2kGa1jCxvfXjv6hq6hsYBQawAqvjMaZNs447\"\n  //   });\n  // }\n\n  // requestRandom() {\n  //   return this.createRequest({\n  //     count: RANDOM_COUNT,\n  //     api_key: \"hPgI2kGa1jCxvfXjv6hq6hsYBQawAqvjMaZNs447\"\n  //   });\n  // }\n\n  // createRequest(data) {\n  //   return reqwest({\n  //     data,\n  //     url: \"https://api.nasa.gov/planetary/apod\"\n  //   });\n  // }\n\n  // formatResponse(data) {\n  //   if (Array.isArray(data)) {\n  //     this.preloadRandoms(data);\n  //     this.response = this.randomData[this.randomIdx];\n  //   } else {\n  //     this.response = data;\n  //     if (!this.randomIdx || this.randomIdx >= this.randomData.length - 1) {\n  //       // preload some random APODs in case you hit random next\n  //       this.requestRandom().then(this.preloadRandoms.bind(this));\n  //     }\n  //   }\n\n  //   ga({ category: \"APOD\", action: \"viewed\", label: this.response.date });\n\n  //   if (this.addToHistory) {\n  //     this.history.add(this.response);\n  //   }\n  //   this.addToHistory = true;\n  //   this.datePicker.setDate(this.response.date);\n  //   this.errorCount = 0;\n  //   this.populateTabs(this.response);\n\n  //   const isMediaImage = this.response.media_type === \"image\";\n\n  //   if (isMediaImage) {\n  //     this.preLoadImage(this.hiResOnly);\n  //   } else if (this.response.media_type === \"video\") {\n  //     this.apodVideo();\n  //   } else {\n  //     this.random();\n  //   }\n  // }\n\n  // errorResponse() {\n  //   this.errorCount++;\n  //   console.log(`Error: APOD API response (${this.errorCount})`);\n  //   this.isRequestInProgress = false;\n  //   if (this.errorCount < ERROR_LIMIT) {\n  //     this.random();\n  //   } else {\n  //     ApodElements.error.textContent = ERROR_MESSAGE;\n  //   }\n  // }\n\n  // preloadRandoms(data) {\n  //   this.randomData = this.randomData.concat(data);\n  //   this.randomIdx = this.randomIdx ? this.randomIdx : 0;\n\n  //   for (let i in data) {\n  //     const random = data[i];\n\n  //     const ImgHd = new Image();\n  //     ImgHd.src = random.hdurl;\n\n  //     if (!this.hiResOnly) {\n  //       const ImgSd = new Image();\n  //       ImgSd.src = random.url;\n  //     }\n  //   }\n  // }\n\n  // populateTabs(response) {\n  //   Object.assign(this.drawer.tabs[0], {\n  //     urls: {\n  //       hdurl: response.hdurl,\n  //       url: response.url\n  //     },\n  //     title: response.title,\n  //     explanation: response.explanation,\n  //     date: response.date\n  //   });\n\n  //   Object.assign(this.drawer.tabs[1], {\n  //     date: response.date,\n  //     title: response.title,\n  //     url: response.url,\n  //     specificDate: this.specificDate.bind(this)\n  //   });\n\n  //   this.drawer.tabs[1].checkFavorite();\n  // }\n\n  // wouldYouLikeToKnowMore(text) {\n  //   const knowMore = new KnowMoreComponent(text, this.drawer);\n  //   const { results } = knowMore;\n\n  //   if (results.length) {\n  //     // Don't draw duplicate tabs beyond the default tabs (i.e. Explanation and Favorite tabs)\n  //     if (this.drawer.tabs.length > 2) {\n  //       return;\n  //     }\n  //     for (let i in results) {\n  //       this.drawer.tabs[0].highlightKeywords(results[i].title, i);\n  //       knowMore.createTab(results[i], i);\n  //     }\n  //   }\n  // }\n\n  // preLoadImage(forceHighDef = false) {\n  //   this.loadedImage = new Image();\n  //   const { hdurl, url, title } = this.response;\n\n  //   // ApodElements.loading.updateBg(this.history.recall(-1).url);\n  //   // If the urls are identical just mark it HD\n  //   this.isImageHD = /(jpg|jpeg|png|gif)$/i.test(hdurl) || hdurl === url;\n  //   this.loadedImage.src = this.isImageHD ? hdurl : url;\n\n  //   const timeout = setTimeout(() => {\n  //     if (!this.loadedImage.complete && !forceHighDef) {\n  //       this.loadedImage.src = url;\n  //       this.isImageHD = false;\n  //     }\n  //   }, this.delayForHdLoad);\n\n  //   this.loadedImage.onload = () => {\n  //     clearTimeout(timeout);\n  //     this.apodImage();\n  //   };\n\n  //   this.loadedImage.onerror = () => {\n  //     clearTimeout(timeout);\n  //     this.isRequestInProgress = false;\n  //     this.random();\n  //   };\n  // }\n\n  // apodImage() {\n  //   ApodElements.image.classList = \"apod__image\";\n  //   ApodElements.imgQuality.classList.remove(\"spin-loader\");\n\n  //   ApodElements.image.style[\"background-image\"] = `url(${\n  //     this.loadedImage.src\n  //   })`;\n  //   ApodElements.image.style[\"background-size\"] = this.backgroundSize();\n\n  //   ApodElements.imgQuality.textContent = this.isImageHD ? \"HD\" : \"SD\";\n\n  //   if (!this.isImageHD) {\n  //     const forceLoadHighDefImg = e => {\n  //       this.isRequestInProgress = true;\n  //       ApodElements.showHiRes.classList.add(\"hide\");\n  //       ApodElements.showHiRes.removeEventListener(\n  //         \"click\",\n  //         forceLoadHighDefImg\n  //       );\n  //       ApodElements.imgQuality.textContent = \"\";\n  //       ApodElements.imgQuality.classList.add(\"spin-loader\");\n  //       this.preLoadImage(true);\n  //     };\n  //     ApodElements.showHiRes.classList.remove(\"hide\");\n  //     ApodElements.showHiRes.addEventListener(\"click\", forceLoadHighDefImg);\n  //   }\n\n  //   this.constructApod();\n  // }\n\n  // apodVideo() {\n  //   ApodElements.image.classList.remove(\"hide\");\n  //   this.response.url = this.response.url.replace(\";autoplay=1\", \"\");\n\n  //   if (!/^http(s?)/i.test(this.response.url)) {\n  //     this.response.url = `https:${this.response.url}`;\n  //   }\n\n  //   const url = new URL(this.response.url);\n  //   url.search = \"autopause=1&autoplay=0\";\n  //   const iFrame = htmlToElements(\n  //     `<iframe width=\"960\" height=\"540\" src='${\n  //       url.href\n  //     }' frameborder=\"0\"></iframe>`\n  //   );\n  //   ApodElements.image.appendChild(iFrame);\n  //   this.constructApod();\n  // }\n\n  // constructApod() {\n  //   const { date, title, explanation } = this.response;\n\n  //   this.isRequestInProgress = false;\n  //   document.title = title;\n  //   ApodElements.title.textContent = title;\n  //   ApodElements.date.textContent = DateManager.prettyDateFormat(date);\n  //   this.wouldYouLikeToKnowMore(`${title} ${explanation}`);\n\n  //   const isToday = DateManager.isToday(date);\n  //   this.navigation.current.el.classList.toggle(\"current\", isToday);\n  //   this.navigation.next.el.classList.toggle(\"hide\", isToday);\n  //   this.navigation.next.toggle(!isToday);\n\n  //   ApodElements.loading.toggle(true);\n  //   ApodElements.explanation.classList.remove(\"hide\");\n  // }\n}\n\nexport default Apod;\n","/*global chrome*/\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Apod from \"./components/Apod\";\n// import topSites from \"./scripts/utilities/buildTopSites\";\n// // import ga from \"./scripts/utilities/ga\";\n\nimport \"./styles/style.scss\";\n\n// document.addEventListener(\"DOMContentLoaded\", topSites);\n\n// Fetch chrome storage settings from options and load\nchrome.storage.sync.get(\n  [\"apodType\", \"hiResOnly\"],\n  ({ hiResOnly, apodType }) => {\n    // ga({ type: \"pageview\", category: \"v3.0.0\", page: \"apod-by-trav\" });\n    console.log('hello apod')\n    ReactDOM.render(\n      <Apod selection={apodType} resolution={hiResOnly} />,\n      document.getElementById(\"root\")\n    );\n  }\n);\n\n// // import * as serviceWorker from './serviceWorker';\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}